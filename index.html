<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Ko eller kviga?</title>
  <style>
    :root{
      --bg1:#120a1b;
      --bg2:#0b1020;
      --glass:rgba(255,255,255,.10);
      --glass2:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.14);
      --shadow: 0 18px 55px rgba(0,0,0,.45);
      --radius: 22px;

      /* Slider-knoppens bild (JS uppdaterar) */
      --thumb-img: var(--thumb-q);
      --thumb-q: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='256' height='256' viewBox='0 0 256 256'><defs><radialGradient id='g' cx='50%25' cy='35%25' r='70%25'><stop offset='0%25' stop-color='%23ffffff'/><stop offset='100%25' stop-color='%23eaeaea'/></radialGradient></defs><circle cx='128' cy='128' r='118' fill='url(%23g)'/><circle cx='128' cy='128' r='118' fill='none' stroke='%23000000' stroke-opacity='0.08' stroke-width='10'/><text x='128' y='162' text-anchor='middle' font-family='system-ui,Segoe UI,Arial' font-size='150' font-weight='900' fill='%23120a1b'>?</text></svg>");
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    body{
      background:
        radial-gradient(900px 700px at 20% 0%, rgba(255,72,196,.22), transparent 55%),
        radial-gradient(900px 700px at 85% 20%, rgba(255,186,0,.18), transparent 58%),
        radial-gradient(1100px 900px at 50% 110%, rgba(0,255,209,.10), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      color:#fff;
      display:grid;
      place-items:center;
      padding: 14px;
      overflow:hidden;
    }

    body::before{
      content:"";
      position:fixed; inset:-40px;
      background-image:
        radial-gradient(circle at 12% 18%, rgba(255,255,255,.16) 0 2px, transparent 3px),
        radial-gradient(circle at 35% 28%, rgba(255,79,209,.18) 0 3px, transparent 4px),
        radial-gradient(circle at 68% 16%, rgba(255,200,0,.14) 0 2px, transparent 3px),
        radial-gradient(circle at 78% 52%, rgba(0,255,209,.12) 0 2px, transparent 3px),
        radial-gradient(circle at 22% 62%, rgba(255,255,255,.12) 0 2px, transparent 3px),
        radial-gradient(circle at 55% 78%, rgba(255,79,209,.12) 0 2px, transparent 3px);
      filter: blur(.2px);
      opacity:.9;
      pointer-events:none;
    }

    .app{
      width: min(430px, 100%);
      min-height: min(860px, 100%);
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .card{
      border-radius: var(--radius);
      background: linear-gradient(180deg, var(--glass), var(--glass2));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .logoHero{
      /* ingen ram, ingen “card” */
      padding: 0;
      margin-top: 2px;
    }
    
    .logoImg{
      width: 100%;
      height: auto;
      display: block;
    
      /* gör den visuellt “så stor som möjligt” */
      max-height: 42vh;            /* justera 38–50vh om du vill */
      object-fit: contain;
    }

    
    .logoWrap{ padding: 14px; }
    .logo{
      width:100%;
      height:auto;
      display:block;
      border-radius: calc(var(--radius) - 6px);
    }

    .picker{ padding: 14px 14px 16px; }

    .thumbRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      padding: 6px 2px 12px;
      user-select:none;
    }

      .thumbBtn{
        all: unset;
        cursor:pointer;
        width: 86px;
        height: 86px;
        border-radius: 18px;
      
        /* ingen ram/kort */
        background: transparent;
        border: none;
        box-shadow: none;
      
        overflow: hidden;
        display:grid;
        place-items:center;
        transition: transform .08s ease, filter .12s ease;
      }
      .thumbBtn:active{ transform: scale(.98); }
      
      /* Behåll en liten “val-markering” utan ram */
      .thumbBtn.selected{
        filter: drop-shadow(0 14px 22px rgba(0,0,0,.45));
      }

    .thumbBtn img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display:block;
    }

    .rangeWrap{ padding: 2px 2px 0; }

    input[type="range"]{
      -webkit-appearance:none;
      appearance:none;
      width:100%;
      height: 56px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      outline:none;
      padding: 0 14px;
    }

    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      appearance:none;
      width: 58px;
      height: 58px;
      border-radius: 999px;

      background-color: rgba(255,255,255,.92);
      background-image: var(--thumb-img);
      background-size: 92% 92%;
      background-position: center;
      background-repeat: no-repeat;

      border: 10px solid rgba(18,10,27,.92);
      box-shadow: 0 14px 42px rgba(0,0,0,.50);
    }

    input[type="range"]::-moz-range-thumb{
      width: 58px;
      height: 58px;
      border-radius: 999px;

      background-color: rgba(255,255,255,.92);
      background-image: var(--thumb-img);
      background-size: 92% 92%;
      background-position: center;
      background-repeat: no-repeat;

      border: 10px solid rgba(18,10,27,.92);
      box-shadow: 0 14px 42px rgba(0,0,0,.50);
    }
    input[type="range"]::-moz-range-track{
      height: 56px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
    }

    .overlay{
      position:fixed;
      inset:0;
      display:none;
      background:#000;
      z-index:9999;
    }
    .overlay.show{
      display:grid;
      grid-template-rows: 1fr auto;
    }
    .overlay img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }
    .bottomBar{
      padding: 14px 14px calc(14px + env(safe-area-inset-bottom));
      background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.78));
      display:flex;
      justify-content:center;
    }
    .btn{
      width: min(430px, 100%);
      border:none;
      border-radius: 18px;
      padding: 16px 18px;
      font-size: 16px;
      font-weight: 900;
      color: #0a0f18;
      background: rgba(255,255,255,.92);
      box-shadow: 0 16px 55px rgba(0,0,0,.55);
      cursor:pointer;
    }
    .btn:active{ transform: scale(.99); }
  </style>
</head>

<body>
  <main class="app" aria-label="Ko eller kviga">
    <section class="logoHero" aria-label="Logotyp">
      <img class="logoImg" src="kek_logga.png" alt="Ko eller kviga? logotyp" />
    </section>

    <section class="card picker" aria-label="Välj ko eller kviga">
      <div class="thumbRow">
        <button class="thumbBtn" id="btnKo" type="button" aria-label="Välj Ko">
          <img src="kek_litenko.png" alt="Ko (ikon)" />
        </button>

        <div style="flex:1"></div>

        <button class="thumbBtn" id="btnKviga" type="button" aria-label="Välj Kviga">
          <img src="kek_litenkviga.png" alt="Kviga (ikon)" />
        </button>
      </div>

      <div class="rangeWrap">
        <input id="slider" type="range" min="-100" max="100" value="0" step="1" aria-label="Valreglage" />
      </div>
    </section>
  </main>

  <section id="overlay" class="overlay" aria-live="polite" aria-label="Vald bild">
    <img id="choiceImg" alt="" />
    <div class="bottomBar">
      <button id="newGame" class="btn" type="button">Nytt spel</button>
    </div>
  </section>

  <script>
    // === Muu-ljud (Web Audio, ingen fil behövs) ===
    function playMuuu() {
      const AudioCtx = window.AudioContext || window.webkitAudioContext;
      if (!AudioCtx) return;

      const ctx = playMuuu._ctx || (playMuuu._ctx = new AudioCtx());
      if (ctx.state === "suspended") ctx.resume();

      const now = ctx.currentTime;

      const osc = ctx.createOscillator();
      const gain = ctx.createGain();

      osc.type = "sawtooth";
      osc.frequency.setValueAtTime(115, now);
      osc.frequency.exponentialRampToValueAtTime(92, now + 0.22);

      const lfo = ctx.createOscillator();
      const lfoGain = ctx.createGain();
      lfo.type = "sine";
      lfo.frequency.setValueAtTime(5.5, now);
      lfoGain.gain.setValueAtTime(6, now);
      lfo.connect(lfoGain);
      lfoGain.connect(osc.frequency);

      gain.gain.setValueAtTime(0.0001, now);
      gain.gain.exponentialRampToValueAtTime(0.35, now + 0.02);
      gain.gain.exponentialRampToValueAtTime(0.18, now + 0.12);
      gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.45);

      const filter = ctx.createBiquadFilter();
      filter.type = "lowpass";
      filter.frequency.setValueAtTime(650, now);
      filter.Q.setValueAtTime(0.8, now);

      osc.connect(filter);
      filter.connect(gain);
      gain.connect(ctx.destination);

      lfo.start(now);
      osc.start(now);

      osc.stop(now + 0.5);
      lfo.stop(now + 0.5);
    }

    const slider    = document.getElementById("slider");
    const overlay   = document.getElementById("overlay");
    const choiceImg = document.getElementById("choiceImg");
    const newGame   = document.getElementById("newGame");
    const btnKo     = document.getElementById("btnKo");
    const btnKviga  = document.getElementById("btnKviga");

    const FULL  = { ko: "kek_ko.png", kviga: "kek_kviga.png" };
    const THUMB = { ko: 'url("kek_litenko.png")', kviga: 'url("kek_litenkviga.png")' };

    // Frågetecken (från CSS-variabeln i :root)
    const QMARK = "var(--thumb-q)";

    const THRESHOLD = 55;

    function setSelected(which){
      btnKo.classList.toggle("selected", which === "ko");
      btnKviga.classList.toggle("selected", which === "kviga");
    }

    function setThumbFromValue(v){
      // Neutral exakt i mitten => frågetecken
      if (v === 0) {
        slider.style.setProperty("--thumb-img", QMARK);
        setSelected(null);
        return;
      }

      const which = (v > 0) ? "kviga" : "ko";
      slider.style.setProperty("--thumb-img", THUMB[which]);
      setSelected(which);
    }

    function showChoice(which){
      playMuuu();
      setSelected(which);
      slider.style.setProperty("--thumb-img", THUMB[which]);
      choiceImg.src = FULL[which];
      choiceImg.alt = which === "ko" ? "Ko" : "Kviga";
      overlay.classList.add("show");
      document.documentElement.style.overflow = "hidden";
      document.body.style.overflow = "hidden";
    }

    function resetGame(){
      overlay.classList.remove("show");
      slider.value = "0";
      slider.style.setProperty("--thumb-img", QMARK);
      setSelected(null);
      document.documentElement.style.overflow = "";
      document.body.style.overflow = "";
    }

    function decideFromValue(v){
      if (v <= -THRESHOLD) return "ko";
      if (v >=  THRESHOLD) return "kviga";
      return null;
    }

    function handleCommit(){
      const v = Number(slider.value);
      const choice = decideFromValue(v);
      if (choice) showChoice(choice);
      else {
        slider.value = "0";
        setThumbFromValue(0);
      }
    }

    slider.addEventListener("input", () => setThumbFromValue(Number(slider.value)));

    slider.addEventListener("change", handleCommit);
    slider.addEventListener("pointerup", handleCommit);
    slider.addEventListener("touchend", handleCommit);

    btnKo.addEventListener("click", () => showChoice("ko"));
    btnKviga.addEventListener("click", () => showChoice("kviga"));
    newGame.addEventListener("click", resetGame);

    // init: neutralläge => frågetecken
    slider.style.setProperty("--thumb-img", QMARK);
    setSelected(null);
  </script>
</body>
</html>


